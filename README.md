<a href="https://pypi.org/project/pyrepka/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/pypi/v/PyRepka"/></a>
<a href="https://pypi.org/project/pyrepka/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/pypi/pyversions/pyrepka"/></a>
<a href="https://p2pbot.pro/repka" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/repka-blue?link=https%3A%2F%2Fp2pbot.pro%2Frepka"/></a>


# PyRepka

PyRepka - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π "–†–µ–ø–∫–∞"

### –†–ï–ü–ö–ê —ç—Ç–æ:

- ü§ñ –ï–¥–∏–Ω–∞—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞, –¥–ª—è –±–æ–ª—å—à–æ–π —Å–∏—Å—Ç–µ–º—ã –±–æ—Ç–æ–≤.
- üíµ –°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –ø–æ–ª—É—á–∞—Ç—å –±–æ–Ω—É—Å—ã –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∏ —Ç—Ä–∞—Ç–∏—Ç—å –∏—Ö –≤ –ª—é–±–æ–º –±–æ—Ç–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –†–ï–ü–ö–ò.
- üëë –ü—Ä–∏–≥–ª–∞—à–∞–π –ø–æ–∫–∞ —Ç–µ–±—è –Ω–µ –ø—Ä–∏–≥–ª–∞—Å–∏–ª–∏. –ü–µ—Ä–≤—ã–º –±—ã—Ç—å –≤—ã–≥–æ–¥–Ω–æ!


# –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

* [–ó–∞–ø—É—Å–∫](#–ó–∞–ø—É—Å–∫)
* [–ú–µ—Ç–æ–¥—ã](#–ú–µ—Ç–æ–¥—ã)
    * [CheckUserRef](#CheckUserRef)
    * [AddUserToRef](#AddUserToRef)
    * [GetReferralUsers](#GetReferralUsers)
    * [GetUserBalance](#GetUserBalance)
    * [Purchase](#Purchase)
    * [Replenishment](#Replenishment)
* [–ü—Ä–∏–º–µ—Ä—ã](#–ü—Ä–∏–º–µ—Ä—ã)


# –ó–∞–ø—É—Å–∫

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ pip:

```python
pip install pyrepka
```

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:

```python
from pyrepka import PyRepka

py_repka = PyRepka(bot_access_token, bot_username, ip, port)
```

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-|-|-|
| bot_access_token | str | –¢–æ–∫–µ–Ω –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –†–µ–ø–∫–µ |
| bot_username | str | –Æ–∑–µ—Ä–Ω–µ–π–º –±–æ—Ç–∞ |
| ip | str | IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç API |
| port | str | –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç API |

*–í—Å–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤—ã–¥–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ API*


# –ú–µ—Ç–æ–¥—ã


### CheckUserRef

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã

GET-–∑–∞–ø—Ä–æ—Å

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-|-|-|
| user_id | int | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å |

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```python
py_repka.check_user_ref(user_id)
```


---


### AddUserToRef

–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ—Ñ. –ø—Ä–æ–≥—Ä–∞–º–º—É

POST-–∑–∞–ø—Ä–æ—Å

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-|-|-|
| user_id | int | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ—Ñ. –ø—Ä–æ–≥—Ä–∞–º–º—É |
| first_name | str | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| last_name | str | –§–∞–º–∏–ª–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| username | str | –Æ–∑–µ—Ä–Ω–µ–π–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| inviter_id | int / None | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≥–ª–∞—Å–∏–ª, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å |

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```python
py_repka.add_user_to_ref(
    user_id,
    first_name,
    last_name,
    username,
    inviter_id
)
```


---


### GetReferralUsers

–ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ

GET-–∑–∞–ø—Ä–æ—Å

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-|-|-|
| user_id | int | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ |

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```python
py_repka.get_referral_users(user_id)
```


---


### GetUserBalance

–ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

GET-–∑–∞–ø—Ä–æ—Å

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-|-|-|
| user_id | int | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –±–∞–ª–∞–Ω—Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å |

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```python
py_repka.get_user_balance(user_id)
```


---


### Purchase

–ü–æ–∫—É–ø–∫–∞ (–∑–∞ –±–∞–ª–ª—ã)

POST-–∑–∞–ø—Ä–æ—Å

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-|-|-|
| user_id | int | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–≤–µ—Ä—à–∞–µ—Ç –ø–æ–∫—É–ø–∫—É |
| points | int | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–ø–∏—Å–∞–Ω—ã —Å –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| reason | str | –ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ |

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```python
py_repka.purchase(
    user_id,
    points,
    reason
)
```


---


### Replenishment

–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–∫—Ç –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–æ–º–æ—â—å—é —ç–∫–≤–∞–π—Ä–∏–Ω–≥–∞

POST-–∑–∞–ø—Ä–æ—Å

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-|-|-|
| user_id | int | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á–µ–π –±–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è |
| points | int | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| reason | str | –ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ |

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```python
py_repka.replenishment(
    user_id,
    points,
    reason
)
```


# –ü—Ä–∏–º–µ—Ä—ã

#### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –Ω–∞ aiogram 3

```python
from pyrepka import PyRepka

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
py_repka = PyRepka(bot_access_token, bot_username, ip, port)

@router.message(F.text.contains("/start"))
async def start_handler(message: Message):

    # ID –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—è
    try:
        invited_by = message.text.split()[1]
    except: 
        invited_by = None

    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É
    py_repka.add_user_to_ref(
        message.from_user.id,
        message.from_user.first_name,
        message.from_user.last_name,
        message.from_user.username,
        invited_by
    )
```


---


#### –ü—Ä–∏–º–µ—Ä –æ–ø–ª–∞—Ç—ã —á–µ–≥–æ-–ª–∏–±–æ –Ω–∞ aiogram 3

```python
from pyrepka import PyRepka

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
py_repka = PyRepka(bot_access_token, bot_username, ip, port)

@router.callback_query(F.data.contains("purchase"))
async def purchase_handler(callback: CallbackQuery):

    # –°–ø–∏—Å—ã–≤–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –±–∞–ª–∞–Ω—Å–∞
    response = py_repka.purchase(
        callback.from_user.id,
        config.PRICE,
        messages.TEXT
    )

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —Å–ø–∏—Å—ã–≤–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ —Å –±–∞–ª–∞–Ω—Å–∞
    if response.status_code == 200:
        # –í—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–º —Å–ø–∏—Å–∞–Ω–∏–∏ —Å—Ä–µ–¥—Å—Ç–≤ —Å –±–∞–ª–∞–Ω—Å–∞
        await callback.answer(
            messages.SUCCESS_PURCHASE,
            show_alert=True
        )

    # –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
    else:
        # –í—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–µ—Ö–≤–∞—Ç–∫–µ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ
        await callback.answer(
            messages.NO_MONEY,
            show_alert=True
        )
```